<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //基于promise发送Ajax请求
        function queryData(url){
            var p = new Promise(function(resolve,reject){
                var xmlHttp = new XMLHttpRequest();
                console.log(xmlHttp);
                xmlHttp.onreadystatechange = function(){
                    if(xmlHttp.readyState !=4 ){return}

                    if(xmlHttp.readyState==4 && xmlHttp.status==200){
                    resolve(xmlHttp.responseText);
                       console.log("succeed");
                       document.getElementById("myDiv").innerHTML=xmlHttp.responseText;
                       
                    }else{
                        reject("服务器访问错误")
                    }
                }
                xmlHttp.open("GET",url);
                xmlHttp.send();
            });

            return p;
        }

        queryData('https://autumnfish.cn/api/joke').then(function(response){
            console.log(response);
        },function(info){
            console.log(info);

        })
    </script>

    <div id="myDiv">
        
    </div>
</body>
</html>